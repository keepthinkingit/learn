# The Basics

## Routing

* `RouteCollectionTest`

  * Route collection can retrieve by name
  * Route collection can get retrieve by action

* `RouteRegistererTest`

  * Middleware Fluent Registration

        ```php
            // 1.
            $this->router->middleware(['one', 'two'])->get('user', 'UserController@index');
            // 2.
            $this->router->middleware('one', 'two')->get('user', 'UserController@index');

            // 2.
            $this->router->get('user', 'UserController@index')->middleware('one', 'two');
            // 3.
            $this->router->get('user', 'UserController@index')->middleware(['one', 'two']);
        ```
  * Register resource routes
  * Register api resource routes

* `RoutingRedirectorTest`

  * Basic redirect: `$this->redirect->to('bar')`
  * Guest redirect put current url in session when method is GET
  * Guest put previous url in session when method is not GET
  * Refresh redirect
  * Back redirect to HTTP referer
  * Redirect by `action`
  * Redirect by `route`

* `RoutingRouteTest`

  * `HttpResponseException` can be caught, and content can be caught too.
  * `HEAD` method return empty content
  * NotModifiedResponse is properly returned
  * Closure Middleware
  * Alias Middleware
  * Controller Closure Middleware
  * Fluent Routing: `uses`, `middleware`
  * Middleware Groups
  * Middleware groups can reference other groups
  * Router Macro
  * Route Macro
  * Classes can be injected into routes
  * Options response are generated by default
  * `SubstituteBindings` middleware

    * Substitute bindings
    * substitute implicit bindings

  * `where` patterns
  * Router binders
  * Router model binding
  * Router Pattern
  * `is_callable`
  * Route redirect

* RoutingSortedMiddlewareTest

* RoutingUrlGeneratorTest

  * PECL delimiters
  * `strtr()` method: translate characters or replace substrings.
  * `testBasicGenerationWithRequestBaseUrlWithSubfolder`

    * `array_replace()` method.
    * `parse_url()` method.
    * `basename()` method.
    * `dirname()` method.
    * `trim()` method. Second parameter are a range of characters that we want to be stripped

  * `testBasicGenerationWithRequestBaseUrlWithSubfolderAndFileSuffix`
  * `testBasicGenerationWithRequestBaseUrlWithFileSuffix`
  * `testBasicGenerationWithPathFormatting`
  * `testUrlFormattersShouldReceiveTargetRoute`
  * `testBasicRouteGeneration`

    * `http_build_query` and `Arr::query` method to build query string.

  * `testFluentRouteNameDefinitions`
  * `testControllerRoutesWithADefaultNamespace`
  * `testControllerRoutesOutsideOfDefaultsNamespace`
  * `testRoutableInterfaceRouting`
  * `testroutableInterfaceRoutingWithSingleParameter`
  * `testRoutesMaintainRequestScheme`
  * `testHttpOnlyRoutes`
  * `testRoutesWithDomains`
  * `testRoutesWithDomainsAndPorts`
  * `testRoutesWithDomainsStripsProtocols`
  * `testHttpsRoutesWithDomains`
  * `testRoutesWithDomainsThroughProxy`
  * `testUrlGenerationForControllerRequestsPassingOfRequiredParameters`
  * `testForceRootUrl` forceRoot and forceScheme
  * `testPrevious`
  * `testRouteNotDefined`

## Middleware

* `RoutingSortedMiddlewareTest`
* `AuthorizeMiddlewareTest` for `Authorize` middleware

  * `testSimpleAbilityUnauthorized`

    1. In pipeline, parse the pipe string to get name and parameters.
    2. And then the container resolve the name of middleware.
    3. In route pipeline's `carry` method, catch the exception.

  * `testSimpleAbilityAuthorized`
  * `testSimpleAbilityWithStringParameter`
  * `testSimpleAbilityWithStringParameterFromRouteParameter`

    * `AbilityMiddleware` can get parameter from route parameter.

  * `testModelTypeUnauthorized`
  * `testModelTypeAuthorized`

    * Router `bind` method: Add a new route parameter binder
    * Router `binder` properties used in `SubstituteBindings` middleware to substitute the route bindings onto the route.

  * `testModelAuthorized`
  * `testModelInstanceAsParameter`

* `AuthenticateMiddlewareTest` for `Authenticate` middleware

  * `testDefaultUnauthenticatedThrows`

    * AuthManager

      * Custom creators: RequestGuard

    * Guard
    * Driver

      * check

  * `testDefaultUnauthenticatedThrowsWithGuards`
  * `testDefaultAuthenticatedKeepsDefaultDriver`
  * `testSecondaryAuthenticatedUpdatesDefaultDriver`
  * `testMultipleDriversUnauthenticatedThrows`
  * `testMultipleDriversUnauthenticatedThrowsGuards`
  * `testMultipleDriversAuthenticatedUpdatesDefault`

* `CacheTest` for `SetCacheHeaders` middleware

  * `testDoNotSetHeaderWhenMethodNotCacheable`

    * `SetCacheHeaders` resolve after got response instance.
    * `s-maxage`, `max-age`

  * `testDoNotSetHeaderWhenNoContent`
  * `testAddHeaders`
  * `testAddHeadersUsingArray`
  * `testGenerateEtag`
  * `testIsNotModified`
  * `testInValidOption`

* `EncryptCookiesTest` for `EncryptCookies` middleware and `AddQueuedCookiesToResponse`

  * `testSetCookieEncryption`
  * `testQueuedCookieEncryption`

    * `CookieJar`